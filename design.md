TODO формат лвла
TODO проходить не по всем пулям
TODO тулзы чтобы делать паттерны, интерполяция по рисунку  тд

Положении пули это `F_i(t, b_0)`, где `b_0` - начальное состояние пули (константа), `t` - номер шага симуляции (момент времени), `F_i` - некоторая функция для пачки `i`.
Получается не нужно хранить состояния всех пуль для всех шагов, а только `t` и некие начальные состояния пуль.
А вот состояние игрока придётся хранить - возможно можно сделать оптимизацию как в Braid хранить только каждые 100 шагов, а для промежуточных только инпуты.

Червоточины! Если что-то попадает в зону червоточины, то оно отправляется назад во времени.

Ещё можно хранить упорядоченный по времени массив ивентов `[(t1, e1), (t2, e2), ..., (tn, en)]` и при отмотке когда `t == tn` отматывать состояние всего через некое Back(en, state).

Будет отдельно пошаговая логика игры и реальное время `period` для перехода на следующий шаг, получается для замедления времени нужно будет просто увеличивать этот `period`. Ну и наверное просто пошаговую логику тоже стоит сделать.

Вневременной герой, то есть герой не зависит от времени, а пули зависят?

Использовать рандомную память или даже код для эстетики.

Тетрис хочет тебя убить.
Если уклоняться рандомно, то не будут зачищаться линии и уклоняться будет всё сложнее, а при переполнении всё взрывается и нет сейфспота и ты умираешь.
Может дать игроку управлять поворотом фигуры? (не, надо чтобы тетрис воспринимался как враг, может тогда его надо ударить чтобы повернуть?)
Главный челлендж это отмотка, хотя в тетрисе немного кусков, положение летящего можно рассчитать по положению игрока и начальному положению фигуры,
а поле можно и хранить наверное, оно всё равно только раз в секунду или даже реже меняется.
Может сделать бесконечный стакан? Типа фигуры летя летят и летят, а потом бац ты осознаёшь, что они не просто летят но и строят башню внизу за экраном.

Кстати чуть не забыл идею с неограниченным полем, точнеее с большим, а не просто окошко.

Что важно:
    -- Отмотка времени
        * Все положения игрока просто хранить, если будет много параметров, то можно сжимать
        * Пули всегда по разному:
            ** Линейные пули - только начальные положения, скорости и время жизни, текущее положение просто вычисляется по формулам
                *** Сразу проблемы: Получается проход вообще по всем пулям лвла и просто определение какие живы и где нарисовать,
                    хотелось бы проходить только по живым в данный момент
                *** Главный плюс: можно отматывать просто на любой момент времени и ты получишь положение всех пуль в момент t
                    Не зависит ни от чего.
            *? Пули зависящие от положения игрока в данный момент:
                *** Например хочу тетрисовые тайлы и чтобы пуля просто всегда висела над игроком и сдвигалась только если
                    игрок перестаёт быть под пулей. Но как тогда мне отматывать время, ведь это неинвертируемая штука, ну простейшее решение
                    для того что не получается вычислить это тупо хранить
        * Путешествие в будущее вуууу
    -- Головоломка
    -- Красивые паттерны

Хотелось бы мало-мальски фиксированную базу игры, а уровни уже сверху доделывать, но я пока не знаю как лучше сделать, так что да...
Может придумать хоть что-то а потом если что переделать.
Что бы хотелось иметь как либу для всего:
    * Движение игрока
      * Массив положений
      * Сейв стейты
      * Глобальное время
    * Отображения между экраном и объективным пространством игры
      * Функции преобразований туда-сюда
    * Коллизии
      * Смертельные пули при касании которых время останавливается
      * Гладкие пули по которым ты скользишь, это просто стенки
    * Графика
      * Рисование спрайтов
      * Анимации (в том числе их отмотка)
    * Звук (в том числе инвертирование)
    * Менюинг
      * Выбор уровней, возможно динамическая подгрузка из папки уровней
    * Управление
    * Дебаггинг, лайвкодинг
    * Главный цикл игры?
    * Сохранения? Но очевидно надо будет для каждого уровня своё состояние придумывать, но может как-то не совсем для каждого можно сделать

Хочу ли я подгружать уровни как плагины?
    * Минусы
      * Надо думать как правильно собирать всё
      * Меньше доступной информации, а значит меньше свободы и больше геморроя с тем чтобы это всё обходить
      * Если плохо задизайню надо будет много раз переписывать и возможно это будет влиять на каждый уровень
      * Платформозависимость, а я хочу в линукс тоже, ибо Steam Deck, да и Савелию охота похвастать
      * Надо продумывать интерфейс
    * Плюсы
      * Есть от чего отталкиваться
      * Архитектурный челленжд, то есть полезный опыт
      * Лайвкодинг будет проще сделать
      * Меньше кода в самом уровне, наверное

Хрен с ним, погнали вот интерфейс:
    * В мейне идёт бесконечный цикл, который просто вызывает функцию название_уровня_step(состояние_игры, дельта_реального_времени)
    * Уровень сам будет решать когда менять внутриигровое время
    * В мейне будет только перехват управления метаигрой, то есть менюинг:
      хотим паузу или перезагрузить уровень или открыть другой или выйти из игры или настройки управления звука и тд.









































